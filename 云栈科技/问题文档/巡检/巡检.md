# cSphere巡检脚本

## 检查项

- IP池
- 所有主机cSphere版本是否一致
- none镜像清理与统计
- 主机状态
- 磁盘使用率(大于80%主机会写入到巡检文件)
- 列出空应用
- 获取停止容器数

## 说明

- python2执行
- /tmp目录下生成inspection.md文件，将inspection.md转换为pdf格式，通过邮箱发送给客户.
- 通过etcd Discovery找到可用的etcd member 获取etcd数据.没有discovery传入no.
- 对于主机检查项只会输出异常主机.(如有异常主机需要手动更改inspection.md文件主机项).
- none镜像清理会一次完成.(清理none镜像操作建议在晚上执行，一次删除太多镜像负载增高造成主机短暂异常).

## 使用

```
chmod +x inspection
./inspection
传入控制器IP，客户简称/全称,巡检人名称,cSphere APIKEY,是否获取etcdIP池,cSphere版本,none镜像是否清理
```
